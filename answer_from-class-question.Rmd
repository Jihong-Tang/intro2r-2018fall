---
title: "Answer to Class Question"
author: "John Little"
date: "`r Sys.Date()`"
output: 
  html_notebook: 
    number_sections: yes
    toc: yes
    toc_float: yes
---

# Question

Several workshop attendees asked how to isolate the data from the data structure.  In other words, How can I report, dynamically, an answer derived programatically? 

> Which restaurant has the most expensive item(s)?  What are those item(s)?

This relates to the *Intro to R* workshop for which documentation can be found in the [intro2r.rev GitHub repository](https://github.com/data-and-visualization/intro2r.rev).

## TL;DR Answer

> answer$itemName

# Packages

Again, let's load the tidyverse package.  I've removed the code chunk warnings so they do not show up in my report.

```{r message=FALSE, warning=FALSE}
library(tidyverse)
```

# Load Data

I'll load the brodheadCenter.csv file into an object in memory using the `readr::read_csf()` function.  `reader` is automatically attached as a package when I loaded the `tidyverse` package.

```{r include=FALSE}
brodhead <- read_csv("data/brodheadCenter.csv")
```

# Derive Answer

In the code chunk, below, let's transform the data in two different ways.  Assign the answers to unique objects names:  `answer` and `answer2`.  The difference in the two answers is that one response is a Tibble of 1 row and 4 columns, the other is a Tibble 3 rows and 4 columns.  Ideally, we want to only display the value of one "cell".  In the next section we will report those answers dynamically.

```{r echo=TRUE}
answer <- brodhead %>% 
  arrange(desc(cost)) %>% 
  filter(type == "restaurant") %>% 
  select(name, type, itemName, cost) %>% 
  head(1) 

answer2 <- brodhead %>% 
  select(name, type, itemName, cost) %>% 
  filter(type == "restaurant",
         cost == max(cost)) 
```

##  Look at the derived data 

```{r}
answer
answer2
```

- `answer` has a data structure class of: `r class(answer)`.  
- `answer2` has a data structure class of: `r class(answer2)` consisting of `r nrow(answer2)` rows and `r ncol(answer2)` variables.  Each column is a vector.  I want only the first row to answer some parts of the question -- since the values in the vector are identical. The `itemName` vector, however, has different values and I want all three values.

# Compose the Answer 

The answer is derived dynamically (or programatically) and integrated into the report (i.e. this is "literate code").  This means the outcome of the report changes as the data changes.  Meanwhile, the prose remains the same.  To see how this is done, look at the [`answers_from-class-question.Rmd`](https://raw.githubusercontent.com/data-and-visualization/intro2r.rev/master/answer_from-class-question.Rmd) file.


## Notation

It's possible to isolate the rows and columns of a data frame using the bracket notation `[` `]`.  An alternative to isolating a column within a data frame is to preceded the column name by a `$`, which is preceded by the data frame name.

>  answer2[1,4]

This code will take the first row, of the fourth column.  Alternatively....

> answer2$cost[1]

And, since `itemName` is a vector of 3 elements, it's also possible to present each element of the vector.  Outside of the R Notebook -- e.g. in an HTML derived report (i.e. an html_notebook) -- the default behavior is to present the vector as a comma separated list.  While, inside the R Notebook the value of the vector can be seen as follows.

> answer2$itemName

```{r}
answer2$itemName
```



## Integrated Prose and Code

The **`r answer$name`** *`r answer$type`* has the most expensive item(s) at $`r answer$cost`.  Those item(s) are 
`r answer$itemName`.

The **`r answer2$name[1]`** *`r answer2$type[1]`* has the most expensive item(s) at $`r answer2$cost[1]`.  Those item(s) are 
`r answer2$itemName`.

> To see how this is done, review the integrated R Markdown and R code in the R Notebook: [`answers_from-class-question.Rmd`](https://raw.githubusercontent.com/data-and-visualization/intro2r.rev/master/answer_from-class-question.Rmd)

## Further Variations

There are additional function which can manage the insertion of additional text and symbols between the vector values, i.e. commas, conjunctions, symbols, etc. (e.g. $, the oxford comma, etc.).  Those functions include `glue::glue`, `paste`, `paste0`, and `print`.  For the moment let's call this question answered. Because, part of the **fun** in [R] is learning more about [R].  

https://rfun.library.duke.edu




